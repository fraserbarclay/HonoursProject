<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <script>

        var socket = io.connect('http://localhost:8000/');

        socket.on('bodyFrame', interpretData);

        function interpretData(bodyFrame) {
            var clipPlane = bodyFrame.floorClipPlane;
            var height2 = clipPlane.w
            document.getElementById("clipPlaneW").innerHTML = "clipPlaneW: " + height2;

            var user = null;
            for (i = 0; i<6; i++){
                if (bodyFrame.bodies[i].tracked == true){
                    user = bodyFrame.bodies[i];
                }
                else {
                    console.log(bodyFrame.bodies[i].tracked);
                }
            }
            
            if (user != null){
                var headPosition = user.joints[3];
                var footPosition = user.joints[19];
                var height = Math.sqrt(Math.pow(headPosition.cameraX - footPosition.cameraX) +
                                        Math.pow(headPosition.cameraY - footPosition.cameraY) +
                                        Math.pow(headPosition.cameraZ - footPosition.cameraZ));

                document.getElementById("cameraY").innerHTML = "cameraY: " + height;
                arctangent(clipPlane, headPosition, footPosition)
            }
        }

        function arctangent(clipPlane, head, foot){
                var cameraAngleRadians= Math.atan(clipPlane.z / clipPlane.y); 
                var cosCameraAngle = Math.cos(cameraAngleRadians);
                var sinCameraAngle = Math.sin(cameraAngleRadians);

                var footY = foot.cameraY * cosCameraAngle + foot.cameraZ * sinCameraAngle;
                var headY = head.cameraY * cosCameraAngle + head.cameraZ * sinCameraAngle;
                var height = headY - footY;
                document.getElementById("arctangent").innerHTML = "Arctangent: " + height;
        }

</script>
</head>
<body>
    <h1 id="cameraY"></h1>
    <h1 id="clipPlaneW"></h1>
    <h1 id="arctangent"></h1>
</body>
</html>